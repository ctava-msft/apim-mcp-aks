apiVersion: v1
kind: Service
metadata:
  name: mcp-server-loadbalancer
  namespace: mcp-server
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "false"  # Public load balancer
    # The resource group where the public IP resides (set by post-provision script)
    service.beta.kubernetes.io/azure-load-balancer-resource-group: "${AZURE_RESOURCE_GROUP_NAME}"
spec:
  type: LoadBalancer
  # Static IP allocated by Bicep (set by post-provision script)
  loadBalancerIP: "${MCP_PUBLIC_IP_ADDRESS}"
  selector:
    app: mcp-server
  ports:
    - name: http
      protocol: TCP
      port: 80
      targetPort: 8000
